BX.ready(function(){const g=document.getElementById("profile-change-btn");const m=document.getElementById("change-profile-form");const j=new FormData(m);const k=Object.fromEntries(j);let avatarChanged=false;const l=document.getElementById("profile-change-avatar-input");const h=document.getElementById("preview-avatar");l.addEventListener("change",function(a){avatarChanged=true;g.disabled=false;const b=a.target.files[0];if(b){const c=new FileReader();c.addEventListener("load",function(){h.src=c.result});c.readAsDataURL(b)}});m.addEventListener("input",function(){const b=new FormData(m);const a=Object.fromEntries(b);if(JSON.stringify(k)===JSON.stringify(a)&&!avatarChanged){g.disabled=true}else{g.disabled=false}});g.addEventListener("click",function(){let keys=Object.keys(k);const b=new FormData(m);const a=Object.fromEntries(b);let changeableFields={};for(let i=0;i<keys.length;i++){let currentKey=keys[i];if(k[currentKey]!==a[currentKey]){changeableFields[currentKey.toUpperCase()]=a[currentKey]}}if(avatarChanged){changeableFields.PERSONAL_PHOTO=l.files[0]}console.log(changeableFields)})});